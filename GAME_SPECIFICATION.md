# アークナイツ風クリッカーゲーム 仕様書

> **バージョン**: 1.0.0
> **最終更新**: 2025年12月
> **プラットフォーム**: Unity 2022+ / PC / Mobile対応予定

---

## 目次

1. [ゲーム概要](#1-ゲーム概要)
2. [コアゲームループ](#2-コアゲームループ)
3. [通貨システム](#3-通貨システム)
4. [クリックシステム](#4-クリックシステム)
5. [自動収入システム](#5-自動収入システム)
6. [アップグレードシステム](#6-アップグレードシステム)
7. [ガチャシステム](#7-ガチャシステム)
8. [キャラクターシステム](#8-キャラクターシステム)
9. [好感度システム](#9-好感度システム)
10. [株式市場システム](#10-株式市場システム)
11. [イベントシステム](#11-イベントシステム)
12. [SP・フィーバーシステム](#12-spフィーバーシステム)
13. [スロットシステム](#13-スロットシステム)
14. [セーブ・統計システム](#14-セーブ統計システム)
15. [UI画面一覧](#15-ui画面一覧)
16. [技術仕様](#16-技術仕様)

---

# 1. ゲーム概要

## 1.1 コンセプト

「アークナイツ」の世界観をベースにしたクリッカー/放置ゲーム。
プレイヤーは龍門幣（LMD）を稼ぎ、オペレーターを集め、株式市場で財を成す。

## 1.2 ターゲット

- カジュアルゲーマー
- アークナイツファン
- 放置ゲーム好き

## 1.3 ゲームの目標

| 短期目標 | 中期目標 | 長期目標 |
|---------|---------|---------|
| LMDを稼ぐ | アップグレードを強化 | 全企業を買収 |
| ガチャでキャラ入手 | 好感度を上げる | 全キャラMAX好感度 |
| 株を購入 | 配当で不労所得 | プレステージ周回 |

---

# 2. コアゲームループ

```
┌─────────────────────────────────────────────────────────────┐
│                    メインループ                              │
│                                                              │
│   クリック ──► LMD獲得 ──► アップグレード購入                 │
│      │                           │                          │
│      │                           ▼                          │
│      │                    クリック力UP                       │
│      │                           │                          │
│      └───────────────────────────┘                          │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                    サブループ                                │
│                                                              │
│   ガチャ ──► キャラ入手 ──► 好感度UP ──► ボーナス獲得        │
│                                                              │
│   株購入 ──► 配当金 ──► 買収完了 ──► 永続ボーナス            │
└─────────────────────────────────────────────────────────────┘
```

---

# 3. 通貨システム

## 3.1 通貨一覧

| 通貨名 | ID | 用途 | 入手方法 |
|-------|-----|------|---------|
| **龍門幣 (LMD)** | `LMD` | メイン通貨。強化・ガチャに使用 | クリック、自動収入、配当 |
| **資格証** | `Certificate` | プレミアム通貨。限定交換 | ガチャ被り、実績報酬 |
| **純正源石** | `Originium` | 課金通貨（将来実装） | 課金、イベント |

## 3.2 通貨管理クラス

```
WalletManager
├── Money (double)        - LMD残高
├── Certificates (long)   - 資格証残高
└── Originium (long)      - 源石残高（将来用）
```

## 3.3 イベント

| イベント | 発火タイミング |
|---------|--------------|
| `OnMoneyChanged` | LMD変動時 |
| `OnCertificatesChanged` | 資格証変動時 |
| `OnInsufficientFunds` | 残高不足時 |

---

# 4. クリックシステム

## 4.1 基本仕様

| 項目 | 値 |
|------|-----|
| 基本クリックダメージ | 1.0 |
| クリック判定エリア | 画面中央 |
| クリック間隔制限 | なし |

## 4.2 ダメージ計算式

```
最終ダメージ = (基本ダメージ + 固定ボーナス) × (1 + %ボーナス) × クリティカル倍率 × フィーバー倍率
```

### 計算要素

| 要素 | 説明 | ソース |
|------|------|--------|
| 基本ダメージ | 1.0 固定 | 定数 |
| 固定ボーナス | +X形式の加算 | `Click_FlatAdd`アップグレード |
| %ボーナス | +X%形式の乗算 | `Click_PercentAdd`アップグレード |
| クリティカル倍率 | 確率発動で倍率適用 | クリティカルシステム |
| フィーバー倍率 | フィーバー中のみ適用 | SPシステム |

## 4.3 クリティカルシステム

| パラメータ | 初期値 | 最大値 |
|-----------|-------|-------|
| クリティカル率 | 0% | 100% |
| クリティカル倍率 | 2.0x | 無制限 |

計算式:
```
if (Random.value < criticalChance) {
    damage *= criticalMultiplier;
}
```

---

# 5. 自動収入システム

## 5.1 基本仕様

| 項目 | 値 |
|------|-----|
| 基本収入 | 0 LMD/秒 |
| 更新間隔 | 1秒 |
| オフライン収入 | 対応予定 |

## 5.2 収入計算式

```
毎秒収入 = (基本収入 + 固定ボーナス) × (1 + %ボーナス) × 株式ボーナス
```

## 5.3 管理クラス

```
IncomeManager
├── BaseIncomePerSecond (double)
├── FlatBonus (double)
├── PercentBonus (double)
└── CalculateCurrentIncome() -> double
```

---

# 6. アップグレードシステム

## 6.1 アップグレードタイプ

| タイプ | 効果 | 例 |
|--------|------|-----|
| `Click_FlatAdd` | クリック威力 +X | クリックパワー |
| `Click_PercentAdd` | クリック威力 +X% | クリック効率 |
| `Income_FlatAdd` | 自動収入 +X/秒 | オート生産 |
| `Income_PercentAdd` | 自動収入 +X% | 生産効率 |
| `Critical_ChanceAdd` | クリティカル率 +X% | 会心率 |
| `Critical_PowerAdd` | クリティカル倍率 +X | 会心威力 |
| `SP_ChargeAdd` | SP回復速度 +X% | SPチャージ |
| `Fever_PowerAdd` | フィーバー倍率 +X | フィーバーパワー |

## 6.2 カテゴリ

| カテゴリ | アイコン | 色 | 含まれるタイプ |
|---------|---------|-----|--------------|
| Click | ⚔️ | オレンジ | Click系 |
| Income | 💰 | 緑 | Income系 |
| Critical | ⚡ | 赤 | Critical系 |
| Skill | 🎯 | 青 | SP/Fever系 |
| Special | ⭐ | 紫 | 特殊効果 |

## 6.3 コスト計算

```
レベルNの購入コスト = baseCost × (costMultiplier ^ N)
```

| 例 | baseCost | costMultiplier | Lv1 | Lv5 | Lv10 |
|----|----------|----------------|-----|-----|------|
| 安価 | 100 | 1.15 | 100 | 175 | 404 |
| 中価格 | 1000 | 1.20 | 1000 | 2074 | 6192 |
| 高価格 | 10000 | 1.25 | 10000 | 24414 | 93132 |

## 6.4 一括購入

| 購入モード | 説明 |
|-----------|------|
| ×1 | 1レベル購入 |
| ×10 | 10レベル購入 |
| ×100 | 100レベル購入 |
| MAX | 購入可能な最大数 |

---

# 7. ガチャシステム

## 7.1 基本仕様

| 項目 | 値 |
|------|-----|
| 単発コスト | 600 資格証 |
| 10連コスト | 6000 資格証（単発と同じ） |
| 天井 | 50回（★6確定） |

## 7.2 排出確率

| レアリティ | 確率 | 天井 |
|-----------|------|------|
| ★6 | 2% | 50回で確定 |
| ★5 | 8% | - |
| ★4 | 50% | - |
| ★3 | 40% | - |

## 7.3 天井システム

```
if (pullCount >= pityCount) {
    guaranteedRarity = Star6;
    pullCount = 0;
}
```

## 7.4 被りボーナス（潜在システム）

同一キャラを複数入手すると「潜在」が上昇：

| 所持数 | 潜在 | ボーナス |
|--------|------|---------|
| 1 | 潜在1 | 基本性能 |
| 2 | 潜在2 | +20% |
| 3 | 潜在3 | +40% |
| 4 | 潜在4 | +60% |
| n | 潜在n | +(n-1)×20% |

被り時に資格証も獲得：
| レアリティ | 資格証 |
|-----------|--------|
| ★3 | 1 |
| ★4 | 5 |
| ★5 | 10 |
| ★6 | 25 |

## 7.5 バナータイプ

| バナー | 特徴 |
|--------|------|
| 初心者 | 割引価格、限定排出 |
| スタンダード | 恒常キャラ排出 |
| 限定ピックアップ | 期間限定キャラ、確率UP |

---

# 8. キャラクターシステム

## 8.1 データ構造

```csharp
CharacterData {
    string id;              // キャラID
    string displayName;     // 表示名
    string description;     // 説明文
    Rarity rarity;          // レアリティ (Star1-6)
    string affiliatedCompanyId;  // 所属企業
    int sortOrder;          // 表示順
}
```

## 8.2 レアリティ

| レアリティ | 色 | Hex |
|-----------|-----|-----|
| ★1 | 灰 | `#E6E6E6` |
| ★2 | 黄緑 | `#BFD933` |
| ★3 | 青 | `#00A6F2` |
| ★4 | 紫 | `#9966D9` |
| ★5 | 金 | `#FFD933` |
| ★6 | オレンジ | `#FF8000` |

## 8.3 キャラクター一覧（例）

| ID | 名前 | レアリティ | 所属 |
|----|------|-----------|------|
| `char_amiya` | アーミヤ | ★5 | ロドス |
| `char_silverash` | シルバーアッシュ | ★6 | カランド貿易 |
| `char_exusiai` | エクシア | ★6 | ペンギン急便 |
| `char_texas` | テキサス | ★5 | ペンギン急便 |
| `char_lappland` | ラップランド | ★5 | シラクーザ |

---

# 9. 好感度システム

## 9.1 基本仕様

| 項目 | 値 |
|------|-----|
| 初期好感度 | 0 |
| 最大好感度 | 200（レベル4） |
| 好感度レベル数 | 5段階 |

## 9.2 好感度レベル

| レベル | 必要値 | 名称 | ボーナス |
|--------|--------|------|---------|
| 0 | 0 | 初対面 | なし |
| 1 | 50 | 知り合い | クリック+5 |
| 2 | 100 | 友人 | クリック+10 |
| 3 | 150 | 親友 | クリック+20 |
| 4 | 200 | 最高の信頼 | クリック+50 |

## 9.3 好感度の上げ方

| 方法 | 獲得量 |
|------|--------|
| 頭なでなで | 基本5 + コンボボーナス |
| プレゼント（お菓子） | +5 |
| プレゼント（ケーキ） | +15 |
| プレゼント（レアアイテム） | +50 |

## 9.4 コンボシステム

連続タッチでコンボ発生：
```
ボーナス = baseBonus + (comboCount - 1) × comboMultiplier
```

| コンボ | 倍率（例） |
|--------|----------|
| 1 | ×1.0 |
| 5 | ×1.4 |
| 10 | ×1.9 |

---

# 10. 株式市場システム

## 10.1 概要

各企業の株を売買し、配当金や買収ボーナスを得るシステム。

## 10.2 企業一覧

| 銘柄コード | 企業名 | 特性 | セクター |
|-----------|--------|------|---------|
| RI | ロドス・アイランド | Medical | Tech |
| RL | ライン生命 | Innovation | Tech |
| PL | ペンギン急便 | Logistics | Logistics |
| BSW | ブラックスチール | Military | Military |
| KT | カランド貿易 | Trading | Finance |

## 10.3 株価パラメータ

| パラメータ | 説明 | 範囲 |
|-----------|------|------|
| `initialPrice` | 初期株価 | 100〜100,000 |
| `volatility` | 変動の激しさ | 0.01〜0.5 |
| `drift` | 長期トレンド | -0.1〜0.2 |
| `jumpProbability` | 急騰/暴落確率 | 0〜0.1 |
| `jumpIntensity` | 急騰/暴落強度 | 0.1〜0.5 |
| `transactionFee` | 取引手数料 | 0〜0.05 |

## 10.4 株価変動モデル

幾何ブラウン運動 + ジャンプ過程：
```
dS = S × (drift × dt + volatility × dW + jump)
```

## 10.5 配当システム

| 設定 | 説明 |
|------|------|
| `dividendRate` | 配当率（例: 0.02 = 2%） |
| `dividendIntervalSeconds` | 配当間隔（秒） |

配当金 = 保有株数 × 株価 × 配当率

## 10.6 保有ボーナス

一定の株式保有率で発動：

| 保有率 | ボーナス例 |
|--------|----------|
| 5% | 強化費用5%軽減 |
| 10% | ガチャ確率2%UP |
| 30% | 配当金1.5倍 |
| 51% | 筆頭株主特権 |

## 10.7 プレステージ（買収周回）

株を100%買い占めると買収完了：

```
保有率100%到達
    ↓
「買収完了！」イベント
    ↓
永続ボーナス獲得
    ↓
株がリセット（0%に戻る）
    ↓
発行株数増加（難易度UP）
    ↓
再び買い占め開始
```

### 周回ボーナス

| 周回 | 永続ボーナス（累計） |
|------|---------------------|
| 1周 | - |
| 2周 | クリック効率+5% |
| 3周 | クリック効率+10% |
| 4周 | クリック効率+15% |

---

# 11. イベントシステム

## 11.1 イベントトリガー

| トリガータイプ | 発火条件 |
|--------------|---------|
| `OnGameStart` | ゲーム起動時 |
| `OnFirstClick` | 初回クリック時 |
| `OnUpgradePurchased` | アップグレード購入時 |
| `OnGachaPull` | ガチャ引いた時 |
| `OnCharacterObtained` | キャラ入手時 |
| `OnAffectionLevelUp` | 好感度レベルUP時 |
| `OnStockPurchased` | 株購入時 |
| `OnCompanyAcquired` | 企業買収時 |

## 11.2 イベントデータ構造

```csharp
GameEventData {
    string eventId;
    EventTriggerType triggerType;
    string triggerCondition;     // 追加条件（JSON形式）
    bool isRepeatable;           // 繰り返し発火可能か
    string conversationId;       // 関連会話ID
}
```

## 11.3 会話システム

イベント発火時にキャラクター会話を表示：
- 立ち絵表示
- テキスト表示（タイプライター演出）
- 選択肢（将来実装）

---

# 12. SP・フィーバーシステム

## 12.1 SPシステム

| 項目 | 値 |
|------|-----|
| 最大SP | 100 |
| SP回復速度 | 1/秒（基本） |
| フィーバー発動コスト | 100 SP |

## 12.2 フィーバーモード

| 項目 | 値 |
|------|-----|
| 基本持続時間 | 10秒 |
| 基本倍率 | 2.0x |
| クールダウン | なし |

フィーバー中：
- クリックダメージ × フィーバー倍率
- 派手な演出
- BGM変化

---

# 13. スロットシステム

## 13.1 基本仕様

クリック時にランダムでスロット演出が発生。

| 項目 | 値 |
|------|-----|
| 発生確率 | 5%（調整可能） |
| リール数 | 3 |
| シンボル種類 | 7種類 |

## 13.2 配当表

| 役 | 配当倍率 |
|----|---------|
| 7-7-7 | ×100 |
| BAR-BAR-BAR | ×50 |
| ベル×3 | ×20 |
| スイカ×3 | ×10 |
| チェリー×3 | ×5 |
| リプレイ×3 | ×2 |
| その他 | ×1 |

---

# 14. セーブ・統計システム

## 14.1 セーブデータ構造

```csharp
ProgressData {
    // 強化レベル
    List<UpgradeProgress> upgrades;

    // アイテム所持数
    List<ItemStack> inventory;

    // 統計データ
    StatisticsData statistics;

    // 発動済みイベント
    List<string> triggeredEventIds;

    // 解放済みメニュー
    List<string> unlockedMenus;
}
```

## 14.2 統計データ

| 項目 | 型 | 説明 |
|------|-----|------|
| `totalClicks` | long | 累計クリック数 |
| `totalMoneyEarned` | double | 累計獲得LMD |
| `totalMoneySpent` | double | 累計消費LMD |
| `totalCriticalHits` | int | 累計クリティカル回数 |
| `totalPlayTimeSeconds` | double | 累計プレイ時間 |
| `highestClickDamage` | double | 最高クリックダメージ |
| `highestMoneyHeld` | double | 最高所持金 |

## 14.3 セーブタイミング

- 自動セーブ: 60秒ごと
- 手動セーブ: 設定画面から
- アプリ終了時

---

# 15. UI画面一覧

## 15.1 画面構成

| 画面ID | 名称 | 説明 |
|--------|------|------|
| `Start` | スタート画面 | タイトル、ゲーム開始 |
| `Home` | ホーム画面 | メインクリッカー画面 |
| `Shop` | ショップ画面 | アップグレード購入 |
| `Gacha` | ガチャ画面 | キャラクター抽選 |
| `Operator` | オペレーター画面 | キャラ詳細、ふれあい |
| `Market` | マーケット画面 | 株式取引 |
| `Log` | ログ画面 | イベント履歴 |

## 15.2 ホーム画面要素

```
┌─────────────────────────────────────────────────────────────┐
│  [所持金表示]                              [設定] [ログ]    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                    [クリックエリア]                          │
│                     (キャラ表示)                             │
│                                                             │
│                [フローティングダメージ]                       │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  [SP バー]                                                  │
│  [フィーバーボタン]                                          │
├─────────────────────────────────────────────────────────────┤
│  [ホーム] [ショップ] [ガチャ] [オペレーター] [マーケット]       │
└─────────────────────────────────────────────────────────────┘
```

## 15.3 ショップ画面要素

```
┌─────────────────────────────────────────────────────────────┐
│  [戻る]  ショップ                          [所持金]         │
├─────────────────────────────────────────────────────────────┤
│  [クリック] [収入] [クリティカル] [スキル] [特殊]            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────┐            │
│  │ [アイコン] アップグレード名                 │            │
│  │            Lv.5 → Lv.6                     │            │
│  │            効果: +10 → +12                 │            │
│  │                          [購入 1000 LMD]   │            │
│  └─────────────────────────────────────────────┘            │
│                                                             │
│  (リスト続き...)                                             │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  購入モード: [×1] [×10] [×100] [MAX]                        │
└─────────────────────────────────────────────────────────────┘
```

---

# 16. 技術仕様

## 16.1 システム構成

```
Assets/Scripts/
├── Main_core/                    # コアシステム
│   ├── Core/
│   │   └── GameController.cs     # ゲーム全体統括
│   ├── Data/
│   │   ├── Definitions/          # ScriptableObject定義
│   │   ├── Character/            # キャラクターデータ
│   │   └── Save/                 # セーブデータ
│   └── Systems/
│       ├── Economy/              # 通貨管理
│       ├── Click/                # クリック処理
│       ├── Income/               # 自動収入
│       ├── Upgrade/              # アップグレード
│       ├── Inventory/            # アイテム管理
│       ├── Affection/            # 好感度
│       ├── Costume/              # 衣装
│       ├── SP/                   # SP・フィーバー
│       ├── Event/                # イベント
│       ├── Market/               # 株式市場
│       └── Audio/                # 音声
│
└── Main_UI/                      # UI関連
    ├── Home_/                    # ホーム画面
    ├── Shop_/                    # ショップ画面
    ├── Gacha_/                   # ガチャ画面
    ├── Operator_/                # オペレーター画面
    ├── Market_/                  # マーケット画面
    ├── Sidebar_/                 # サイドバー
    ├── Start_/                   # スタート画面
    └── Log_/                     # ログ画面
```

## 16.2 設計パターン

| パターン | 使用箇所 | 説明 |
|---------|---------|------|
| Singleton | GameController, Managers | 唯一のインスタンス管理 |
| Facade | UIController系 | サブコントローラーの統合 |
| Service層 | ShopService等 | ビジネスロジック分離 |
| Observer | イベント駆動 | Action<T>による疎結合 |
| ScriptableObject | データ定義 | エディタ編集可能データ |

## 16.3 イベント駆動設計

```csharp
// マネージャー側
public event Action<double> OnMoneyChanged;

// UI側
wallet.OnMoneyChanged += UpdateMoneyDisplay;
```

## 16.4 技術スタック

| 項目 | 技術 |
|------|------|
| エンジン | Unity 2022+ |
| 言語 | C# |
| UIシステム | UI Toolkit (USS/UXML) |
| 入力 | Input System |
| レンダリング | URP |
| データ形式 | ScriptableObject, JSON |

## 16.5 ファイル数・コード量

| カテゴリ | ファイル数 | 行数（概算） |
|---------|-----------|-------------|
| Main_core | 52 | 11,000 |
| Main_UI | 51 | 14,000 |
| **合計** | **103** | **25,000** |

---

# 付録A: 定数・設定値一覧

## A.1 ゲームバランス定数

| 定数名 | 値 | 説明 |
|--------|-----|------|
| `BASE_CLICK_DAMAGE` | 1.0 | 基本クリックダメージ |
| `BASE_CRITICAL_MULTIPLIER` | 2.0 | 基本クリティカル倍率 |
| `BASE_FEVER_DURATION` | 10.0 | 基本フィーバー持続時間 |
| `BASE_FEVER_MULTIPLIER` | 2.0 | 基本フィーバー倍率 |
| `MAX_SP` | 100 | 最大SP |
| `SP_RECOVERY_RATE` | 1.0 | SP回復速度/秒 |
| `PITY_COUNT` | 50 | ガチャ天井 |

## A.2 UI定数

| 定数名 | 値 | 説明 |
|--------|-----|------|
| `CURRENCY_ANIMATION_INTERVAL_MS` | 30 | 通貨アニメーション間隔 |
| `TYPEWRITER_INTERVAL_MS` | 20 | タイプライター間隔 |
| `FLOATING_TEXT_DURATION` | 1.0 | フローティングテキスト表示時間 |

---

# 付録B: 今後の実装予定

## B.1 短期（実装中/予定）

- [x] 基本クリックシステム
- [x] アップグレードシステム
- [x] ガチャシステム
- [x] 好感度システム
- [x] 株式市場基本機能
- [x] イベントシステム
- [x] 衣装システム
- [ ] オフライン収入
- [ ] 実績システム

## B.2 中期

- [ ] 期間限定イベント
- [ ] デイリーミッション
- [ ] マルチエンディング
- [ ] クラウドセーブ

## B.3 長期

- [ ] マルチプレイ要素
- [ ] ギルドシステム
- [ ] PvPランキング
- [ ] 課金システム

---

# 付録C: 用語集

| 用語 | 説明 |
|------|------|
| LMD | 龍門幣。ゲーム内メイン通貨 |
| 資格証 | プレミアム通貨 |
| オペレーター | キャラクターの呼称 |
| 好感度 | キャラクターとの親密度 |
| 潜在 | 同一キャラ入手による強化段階 |
| フィーバー | SP消費で発動する強化モード |
| プレステージ | 株式買収周回システム |
| PSB | PSD Builder（キャラクター画像形式） |

---

*この仕様書は開発の進行に伴い随時更新されます。*
